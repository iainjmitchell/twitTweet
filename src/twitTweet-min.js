(function(e,t){"use strict";e.widget("ijm.twitTweet",{options:{results:5,userName:"*",includeMentions:!0},_create:function(){e.ajax({url:this._buildUrl(),dataType:"jsonp",timeout:1e4,error:e.proxy(this._displayError,this),success:e.proxy(this._displayTweets,this)})},_buildUrl:function(){var e=["http://search.twitter.com/search.json?q=from:",this.options.userName];return this.options.includeMentions&&e.push("+OR+",this.options.userName),e.push("&rpp=",this.options.results),e.join("")},_displayError:function(){e("<div>").addClass("error").append("Error connecting to twitter").appendTo(this.element)},_displayTweets:function(t){if(t){var n=this._getTweetTemplate(),r=this.element;e.each(t.results,function(){e(n).find(".tweet-image img").prop("src",this.profile_image_url).prop("alt",this.from_user).end().find(".tweet-user").append(this.from_user).end().find(".tweet-text").append(e.twitterLinkParser(this.text)).end().find(".tweet-date").append(this.created_at).end().appendTo(r)})}},_getTweetTemplate:function(){var e=['<div class="tweet">','<div class="tweet-image"><img/></div>'];return e.push('<div class="tweet-content">','<div class="tweet-user"></div>'),e.push('<div class="tweet-text"></div>','<div class="tweet-date"></div>'),e.push("</div>","</div>"),e.join("")}}),e.twitterLinkParser=function(t){function i(){var n=t.split(" ");return e.each(n,function(e){n[e]=s(this)}),n.join(" ")}function s(e){var t=e.replace(n,o);return t=t.replace(r,u),t}function o(e){return'<a href="'+e+'">'+e+"</a>"}function u(e){return'<a href="http://www.twitter.com/'+e.substring(1,e.length)+'">'+e+"</a>"}var n=new RegExp("\\bhttps?://[-A-Za-z0-9+&@#/%?=~_|!:,.;]*[-A-Za-z0-9+&@#/%=~_|]"),r=new RegExp("@([A-Za-z0-9_]+)");return i()}})(jQuery);